name: fast-stress-test
description: Fast stress test (4x speed) with 50 nodes for quick validation

fleet: []

stress:
  duration: 1m  # Simulated duration (appears as 1m in metrics/events)
  metrics_interval: 5s
  seed: 42
  time_scale: 4.0  # Run 4x faster - 1m simulation completes in ~15s wall clock
  report_file: /tmp/fast-stress-report.json
  html_report_file: /tmp/fast-stress-report.html

  fleet_gen:
    total_nodes: 50

    templates:
      - name: h100-8gpu
        weight: 70
        gpu_count: 8
        gpu_type: "NVIDIA H100 80GB HBM3"
        instance_type: a3-highgpu-8g

      - name: a100-8gpu
        weight: 30
        gpu_count: 8
        gpu_type: "NVIDIA A100 80GB"
        instance_type: a2-ultragpu-8g

    providers:
      gcp: 60
      aws: 40

    regions:
      us-central1: 50
      us-east1: 50

    startup:
      pattern: linear
      duration: 10s  # Will run in ~2.5s due to 4x time scale
      jitter_percent: 10

  chaos:
    enabled: true
    failure_rate: 200.0  # ~10 failures/min with 50 nodes

    xid_distribution:
      13: 20  # Graphics Engine Exception
      31: 25  # GPU memory page fault
      48: 15  # Double Bit ECC Error
      79: 10  # GPU fallen off bus
      74: 10  # NVLink Error
      94: 20  # Contained ECC error

    failure_types:
      - type: xid_error
        weight: 70
      - type: temperature
        weight: 15
      - type: nvml_failure
        weight: 15

    cascading:
      enabled: true
      probability: 0.2
      max_depth: 2
      min_delay: 500ms  # Will be ~125ms due to 4x time scale
      max_delay: 3s     # Will be ~750ms due to 4x time scale
      scope: zone
      max_affected_percent: 0.15

    recovery:
      enabled: true
      probability: 0.6
      mean_time: 30s    # Will be ~7.5s due to 4x time scale
      std_dev: 10s

events:
  - at: 0s
    action: log
    params:
      log_message: "Fast stress test starting (4x speed)"

  - at: 15s
    action: log
    params:
      log_message: "Fleet started, chaos active"

  - at: 45s
    action: log
    params:
      log_message: "Final phase"
